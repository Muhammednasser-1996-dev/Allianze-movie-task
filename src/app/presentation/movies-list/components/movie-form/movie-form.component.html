<form class="form" [formGroup]="movieForm">

  <!-- title and release date -->
  <div class="d-flex my-3 pt-2 gap-2 justify-content-center align-items-center w-100">
    <!-- title -->
    <div>
      <span class="p-float-label">
        <input id="float-input" type="text" formControlName="title" pInputText>
        <label for="float-input">Title</label>
      </span>
      <small class="text-danger" *ngIf="
      submitted && movieForm.get('title')?.hasError('required')
    ">
        Title is required
      </small>
      <small class="text-danger" *ngIf="
       movieForm.get('title')?.hasError('maxLength')
    ">
        50 Characters Only
      </small>
      <div
        *ngIf="(movieForm.get('title')?.invalid && movieForm.get('title')?.touched) || movieForm.get('title')?.dirty">
        <small class="text-danger" *ngIf="movieForm.get('title')?.errors?.['maxlength']">
          50 Characters Only
        </small>
      </div>
    </div>
    <!-- title -->


    <!-- date -->
    <div>
      <p-calendar appendTo="body" placeholder="Release Date" formControlName="release_date"></p-calendar>
      <small class="text-danger" *ngIf="
    submitted && movieForm.get('release_date')?.hasError('required')
  ">
        Release Date is required
      </small>
    </div>
    <!-- date -->
  </div>
  <!-- title and release date -->


  <!-- Vote and Vote Average -->
  <div class="d-flex my-4 pt-2 gap-2 justify-content-center align-items-center w-100">
    <!-- vote_count -->
    <div>
      <span class="p-float-label">
        <input id="float-input" type="text" formControlName="vote_count" pInputText>
        <label for="float-input">Vote Count</label>
      </span>
      <small class="text-danger" *ngIf="
        submitted && movieForm.get('vote_count')?.hasError('required')
      ">
        Vote Count is required
      </small>
      <div
        *ngIf="(movieForm.get('vote_count')?.invalid && movieForm.get('vote_count')?.touched) || movieForm.get('vote_count')?.dirty">
        <small class="text-danger" *ngIf="movieForm.get('vote_count')?.errors?.['pattern']">
          vote count invalid
        </small>
      </div>
    </div>
    <!-- vote_count -->


    <!-- Vote Average -->
    <div>
      <span class="p-float-label">
        <input id="float-input" type="text" formControlName="vote_average" pInputText>
        <label for="float-input">Vote Average</label>
      </span>
      <small class="text-danger" *ngIf="
        submitted && movieForm.get('vote_average')?.hasError('required')
      ">
        Vote Average is required
      </small>
      <div
        *ngIf="(movieForm.get('vote_average')?.invalid && movieForm.get('vote_average')?.touched) || movieForm.get('vote_average')?.dirty">
        <small class="text-danger" *ngIf="movieForm.get('vote_average')?.errors?.['max']">
          vote average is maximum 10
        </small>
      </div>
      <div
        *ngIf="(movieForm.get('vote_average')?.invalid && movieForm.get('vote_average')?.touched) || movieForm.get('vote_average')?.dirty">
        <small class="text-danger" *ngIf="movieForm.get('vote_average')?.errors?.['pattern']">
          vote average is invalid
        </small>
      </div>
    </div>
    <!-- Vote Average -->
  </div>
  <!-- Vote and Vote Average -->

  <!-- over view -->
  <textarea formControlName="overview" placeholder="overview..." class="form-control"></textarea>
  <small class="text-danger" *ngIf="
        submitted && movieForm.get('overview')?.hasError('required')
      ">
    overview is required
  </small>
  <div
    *ngIf="(movieForm.get('overview')?.invalid && movieForm.get('overview')?.touched) || movieForm.get('overview')?.dirty">
    <small class="text-danger" *ngIf="movieForm.get('overview')?.errors?.['maxlength']">
      400 Characters Only allowed
    </small>
  </div>
  <!-- over view -->

  <!-- upload poster -->
  <div class="dropzone rounded-4 my-3" fileDragDrop (filesChangeEmiter)="fileChange($event, true)">
    <div class="text-wrapper">
      <div class="centered">
        <svg *ngIf="!viewImage" width="27" height="27" viewBox="0 0 27 27" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M25.4148 20.7089H22.5994V17.8935C22.5994 17.6446 22.5006 17.4059 22.3246 17.2299C22.1486 17.0539 21.9099 16.9551 21.661 16.9551C21.4121 16.9551 21.1734 17.0539 20.9974 17.2299C20.8214 17.4059 20.7225 17.6446 20.7225 17.8935V20.7089H17.9072C17.6583 20.7089 17.4196 20.8077 17.2436 20.9837C17.0676 21.1597 16.9688 21.3984 16.9688 21.6473C16.9688 21.8962 17.0676 22.1349 17.2436 22.3109C17.4196 22.4869 17.6583 22.5858 17.9072 22.5858H20.7225V25.4011C20.7225 25.65 20.8214 25.8887 20.9974 26.0647C21.1734 26.2407 21.4121 26.3396 21.661 26.3396C21.9099 26.3396 22.1486 26.2407 22.3246 26.0647C22.5006 25.8887 22.5994 25.65 22.5994 25.4011V22.5858H25.4148C25.6637 22.5858 25.9024 22.4869 26.0784 22.3109C26.2544 22.1349 26.3532 21.8962 26.3532 21.6473C26.3532 21.3984 26.2544 21.1597 26.0784 20.9837C25.9024 20.8077 25.6637 20.7089 25.4148 20.7089Z"
            fill="#1071B8" />
          <path
            d="M14.1539 20.7084H2.8925C2.6436 20.7084 2.40491 20.6095 2.22891 20.4335C2.05292 20.2575 1.95405 20.0188 1.95405 19.7699V2.87785C1.95405 2.62896 2.05292 2.39026 2.22891 2.21426C2.40491 2.03827 2.6436 1.9394 2.8925 1.9394H19.7846C20.0335 1.9394 20.2722 2.03827 20.4482 2.21426C20.6242 2.39026 20.723 2.62896 20.723 2.87785V14.1392C20.723 14.3881 20.8219 14.6268 20.9979 14.8028C21.1739 14.9788 21.4126 15.0777 21.6615 15.0777C21.9104 15.0777 22.1491 14.9788 22.3251 14.8028C22.5011 14.6268 22.5999 14.3881 22.5999 14.1392V2.87785C22.5999 2.13117 22.3033 1.41508 21.7753 0.887097C21.2474 0.359116 20.5313 0.0625 19.7846 0.0625H2.8925C2.14582 0.0625 1.42973 0.359116 0.901745 0.887097C0.373765 1.41508 0.0771484 2.13117 0.0771484 2.87785V19.7699C0.0771484 20.5166 0.373765 21.2327 0.901745 21.7607C1.42973 22.2887 2.14582 22.5853 2.8925 22.5853H14.1539C14.4028 22.5853 14.6415 22.4864 14.8175 22.3104C14.9935 22.1344 15.0923 21.8957 15.0923 21.6468C15.0923 21.3979 14.9935 21.1592 14.8175 20.9833C14.6415 20.8073 14.4028 20.7084 14.1539 20.7084Z"
            fill="#1071B8" />
          <path
            d="M8.52288 8.50865C9.81861 8.50865 10.869 7.45826 10.869 6.16253C10.869 4.8668 9.81861 3.81641 8.52288 3.81641C7.22715 3.81641 6.17676 4.8668 6.17676 6.16253C6.17676 7.45826 7.22715 8.50865 8.52288 8.50865Z"
            fill="#1071B8" />
          <path
            d="M5.04165 11.5949L3.83105 12.8149V18.8303H18.8462V12.8149L14.8203 8.77954C14.7331 8.69159 14.6293 8.62177 14.5149 8.57413C14.4005 8.52648 14.2779 8.50195 14.154 8.50195C14.0301 8.50195 13.9075 8.52648 13.7931 8.57413C13.6787 8.62177 13.5749 8.69159 13.4877 8.77954L8.5233 13.7533L6.37425 11.5949C6.28701 11.5069 6.18322 11.4371 6.06886 11.3895C5.9545 11.3418 5.83184 11.3173 5.70795 11.3173C5.58407 11.3173 5.46141 11.3418 5.34705 11.3895C5.23269 11.4371 5.1289 11.5069 5.04165 11.5949Z"
            fill="#1071B8" />
        </svg>

        <input type="file" name="file" id="file" (change)="fileChange($event, false)">
        <label class="my-2" for="file"><span class="text-primary text-decoration-underline">Click</span> to upload or
          drag and drop</label>
        <p *ngIf="!viewImage" class="support">Supports JPG, JPEG 2000, PNG</p>
        <div>
          <img *ngIf="viewImage" [src]="imagePath" alt="poster" class="w-100  rounded shadow">
        </div>
      </div>

    </div>
  </div>
  <small class="text-danger" *ngIf="showRequiredImg">
    Please Upload Image
  </small>

  <!-- upload poster -->

  <!-- buttons -->
  <div class="atcion-btns my-3 d-flex flex-row-reverse gap-1 align-items-center justify-content-center">
    <button (click)="addMovie()" pButton pRipple type="button" class="add w-100 my-2" label="Add Moview"
      [loading]="isLoading" type="submit"></button>

    <button pButton pRipple type="button" (click)="cancel()" class="p-button-secondary  w-100 my-2"
      [label]="'Cancel'"></button>
  </div>
  <!-- buttons -->
</form>
